<app-plantilla-fondo-simple titulo='Control de Estantería'>

    <!-- CONTENIDO -->
    <div contenido>

        <div fxLayout="column">

            <!-- Filtros en Pantalla grande -->
            <div fxLayout="row" class="content-card pb-4">

                <!-- LOTE -->
                <div fxFlex="100" class="fuse-card p-24 mr-8">

                    <ng-container *ngTemplateOutlet="filtrosLote"></ng-container>


                    <button [disabled]="!this.lote" mat-raised-button color="primary" (click)="buscarLote()" class="mt-24 p-8">Buscar Lote</button>
                </div>

            </div>
            <!-- / Filtros en Pantalla grande -->


            <!-- SECCION ARTICULOS -->
            <div *ngIf="this.dataSource2" class="fuse-card my-24" style="max-width: 100%;">

                <!-- BOTON "FILTROS" -->
                <!-- <span fxLayoutAlign="end">

                    <button mat-button (click)="toggleSidebarOpen('sidebarFilter')" class="m-12">
                        <mat-icon>tune</mat-icon>
                        Filtros                
                    </button> 
                </span> -->
                <!-- / BOTON "FILTROS" -->
                <div fxLayout="row" fxLayoutAlign="space-between">

                    <div class="h2 m-24">{{this.nombreLote}}</div>
                </div>

                <div fxLayout="row" fxLayoutAlign="space-between">
                    
                    <mat-form-field appearance="outline" style="width: 100%;" class="mt-8 mx-12">
                        <mat-label>Código de Barras</mat-label>
                        <input #buscarCodigoBarras class="text-uppercase" (keyup)="searchCodigoBarras()" matInput value="" placeholder="Código de Barras">
                        <mat-icon matSuffix>search</mat-icon>
                    </mat-form-field>

                    <mat-form-field appearance="outline" style="width: 100%;" class="mt-8 mx-12">
                        <mat-label>CUPA</mat-label>
                        <input #buscarCUPA class="text-uppercase" (keyup)="searchCUPA()" matInput value="" placeholder="CUPA">
                        <mat-icon matSuffix>search</mat-icon>
                    </mat-form-field>
                </div>

                <!-- TITULO/BUSCADOR/BOTON -->
                <div fxLayout="row" fxLayoutAlign="space-between">
                    <div class="h2 m-24">Artículos</div>

                    <mat-form-field appearance="outline" style="width: 100%;" class="mt-8 mx-12">
                        <mat-label>Código de Artículo o Comprobante</mat-label>
                        <input #buscarCbte class="text-uppercase" (keyup)="searchCbte()" matInput value="" placeholder="Buscar Cód. Artículo o comprobante">
                        <mat-icon matSuffix>search</mat-icon>
                    </mat-form-field>
                </div>
                <!-- / TITULO/BUSCADOR/BOTON -->

                <ng-container *ngTemplateOutlet="articulos"></ng-container>
            </div>
            <!-- / SECCION ARTICULOS -->
        </div>



    </div>
    <!-- / CONTENIDO -->
</app-plantilla-fondo-simple>



<!-- SIDE BAR -->
<fuse-sidebar name="sidebarFilter" class="theme-options-sidebar" position="right" [invisibleOverlay]="false">

    <div fxLayout="column">

        <!-- BOTON CERRAR -->
        <span fxLayoutAlign="start">

            <button fxHide.gt-sm mat-button (click)="toggleSidebarOpen('sidebarFilter')" class="mb-24">
                <mat-icon>close</mat-icon>
            </button> 
        </span>
        <!-- / BOTON CERRAR -->


        <!-- FILTROS LOTE -->
        <!-- <span class="p-24 pt-8">
    
            <ng-container *ngTemplateOutlet="filtrosLote"></ng-container>
        </span> -->
        <!-- / FILTROS LOTE -->


        <!-- / FILTRO ARTICULOS -->

    </div>

</fuse-sidebar>
<!-- / SIDE BAR -->


<!-- TEMPLATE LISTA -->
<ng-template #articulos>

    <div style="width: 100%; overflow: auto;">
        
        <table mat-table
                [dataSource]="dataSource" multiTemplateDataRows
                class="mat-elevation-z8">
            <ng-container matColumnDef="{{column}}" *ngFor="let column of columnsToDisplay">
                <th mat-header-cell *matHeaderCellDef> {{column}} </th>
                <td mat-cell *matCellDef="let element"> {{element[column]}} </td>
            </ng-container>

            <!-- Expanded Content Column - The detail row is made up of this one column that spans across all columns -->
            <ng-container matColumnDef="expandedDetail">
                <td mat-cell *matCellDef="let element" [attr.colspan]="columnsToDisplay.length">
                <div class="example-element-detail"
                    [@detailExpand]="element == expandedElement ? 'expanded' : 'collapsed'">
                    <div class="example-element-diagram">
                    <div class="example-element-position"> {{element.position}} </div>
                    <div class="example-element-symbol"> {{element.symbol}} </div>
                    <div class="example-element-name"> {{element.name}} </div>
                    <div class="example-element-weight"> {{element.weight}} </div>
                    </div>
                    <div class="example-element-description">
                    {{element.description}}
                    <span class="example-element-description-attribution"> -- Wikipedia </span>
                    </div>
                </div>
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
            <tr mat-row *matRowDef="let element; columns: columnsToDisplay;"
                class="example-element-row"
                [class.example-expanded-row]="expandedElement === element"
                (click)="expandedElement = expandedElement === element ? null : element">
            </tr>
            <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="example-detail-row"></tr>
        </table>

        
    </div>
</ng-template>

<!-- / TEMPLATE LISTA -->


<!-- FILTROS LOTE -->
<ng-template #filtrosLote>

    <div fxLayout="column">

        <mat-form-field appearance="outline">
            <mat-label>Lote</mat-label>
            <input #buscarLote (keyup)="searchLote()" matInput value="" placeholder="Buscar lote">
            <!-- <input matInput value="" placeholder="Buscar lote"> -->
            <mat-icon matSuffix>search</mat-icon>
        </mat-form-field>

        <div fxLayout="row">

            <mat-form-field appearance="outline" fxFlex="50" class="mr-4">
                <mat-label>Desde (lote)</mat-label>
                <input matInput [min]="minDateDesdeLote" [max]="maxDateDesdeLote" [matDatepicker]="pickerLoteDesde" (dateChange)="addEvent('pickerLoteDesde', $event)">
                <mat-datepicker-toggle matSuffix [for]="pickerLoteDesde"></mat-datepicker-toggle>
                <mat-datepicker #pickerLoteDesde></mat-datepicker>
            </mat-form-field>

            <mat-form-field appearance="outline" fxFlex="50" class="ml-4">
                <mat-label>Hasta (lote)</mat-label>
                <input matInput [min]="minDateHastaLote" [max]="maxDateHastaLote" [matDatepicker]="pickerLoteHasta" (dateChange)="addEvent('pickerLoteHasta', $event)">
                <mat-datepicker-toggle matSuffix [for]="pickerLoteHasta"></mat-datepicker-toggle>
                <mat-datepicker #pickerLoteHasta></mat-datepicker>
            </mat-form-field>
        </div>
    </div>
</ng-template>
<!-- / FILTROS LOTE -->